diff --git a/src/CMakeLists.txt b/src/CMakeLists.txt
index bde2973..85b1798 100644
--- a/src/CMakeLists.txt
+++ b/src/CMakeLists.txt
@@ -128,7 +128,11 @@ set(konsole_LIBS ${KDE4_KPTY_LIBS}
                  ${KDE4_KIO_LIBS}
                  ${KDE4_KNOTIFYCONFIG_LIBS}
                  ${QT_QTXML_LIBRARY}
-                 ${X11_LIBRARIES})
+                 ${X11_LIBRARIES}
+		 qtlua)
+
+#Required for qtlua
+set(CMAKE_CXX_FLAGS "-fpermissive")
 
 if(HAVE_LIBKONQ)
   set(konsole_LIBS ${konsole_LIBS} ${LIBKONQ_LIBRARY})
diff --git a/src/EditProfileDialog.ui b/src/EditProfileDialog.ui
index 82298cf..66a1084 100644
--- a/src/EditProfileDialog.ui
+++ b/src/EditProfileDialog.ui
@@ -1109,6 +1109,11 @@
                 <string comment="The shape of the cursor">Underline</string>
                </property>
               </item>
+              <item>
+               <property name="text">
+                <string comment="The shape of the cursor">Custom</string>
+               </property>
+              </item>
              </widget>
             </item>
             <item>
diff --git a/src/Enumeration.h b/src/Enumeration.h
index a9fab40..fe4f722 100644
--- a/src/Enumeration.h
+++ b/src/Enumeration.h
@@ -85,7 +85,8 @@ public:
          */
         IBeamCursor     = 1,
         /** Draw a line underneath the cursor's position. */
-        UnderlineCursor = 2
+        UnderlineCursor = 2,
+        CustomCursor = 3
     };
 
     /** This enum describes the behavior of triple click action . */
diff --git a/src/TerminalDisplay.cpp b/src/TerminalDisplay.cpp
index 2235047..6d388b4 100644
--- a/src/TerminalDisplay.cpp
+++ b/src/TerminalDisplay.cpp
@@ -72,6 +72,11 @@
 #include "SessionManager.h"
 #include "Session.h"
 
+// Custom cursor painting.
+#include <iterator>
+#include <QtLua/State>
+#include <QtLua/Value>
+
 using namespace Konsole;
 
 #ifndef loc
@@ -632,6 +637,7 @@ void TerminalDisplay::drawBackground(QPainter& painter, const QRect& rect, const
     painter.fillRect(scrollBarArea, _scrollBar->palette().background());
 }
 
+#include <iostream>
 void TerminalDisplay::drawCursor(QPainter& painter,
                                  const QRect& rect,
                                  const QColor& foregroundColor,
@@ -678,6 +684,31 @@ void TerminalDisplay::drawCursor(QPainter& painter,
                          cursorRect.top(),
                          cursorRect.left(),
                          cursorRect.bottom());
+
+    } else if (_cursorShape == Enum::CustomCursor) {
+
+	QFile file("test.lua");
+	QtLua::State state;
+	state.openlib(QtLua::AllLibs);
+
+	//state["painter"] = QtLua::Value(state, &painter, false);
+	state["painter"] = &painter;
+	state["cursorRect"] = &cursorRect;
+
+	/* Open the Lua script file. */
+	file.open(QIODevice::ReadOnly);
+
+	/* Execute the contents. */
+	try {
+		state.exec_chunk(file);
+	} catch (QtLua::String e) {
+
+		//attempt to index global 'cursorRect' (a number value)
+		std::cout << e.to_qstring().toUtf8().constData() << std::endl;
+	}
+	
+	/* Close the file. */
+	file.close();
     }
 }
 
diff --git a/src/ViewManager.cpp b/src/ViewManager.cpp
index 0b43bb8..9a7997a 100644
--- a/src/ViewManager.cpp
+++ b/src/ViewManager.cpp
@@ -858,6 +858,8 @@ void ViewManager::applyProfileToView(TerminalDisplay* view , const Profile::Ptr
         view->setKeyboardCursorShape(Enum::IBeamCursor);
     else if (cursorShape == Enum::UnderlineCursor)
         view->setKeyboardCursorShape(Enum::UnderlineCursor);
+    else if (cursorShape == Enum::CustomCursor)
+        view->setKeyboardCursorShape(Enum::CustomCursor);
 
     // cursor color
     if (profile->useCustomCursorColor()) {
